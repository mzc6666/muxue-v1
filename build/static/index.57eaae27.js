import{d as B,a as f,a1 as b,r as v,b as E,o as k,c as w,e as a,i as d,v as p,j as c,q as F,a5 as r,Q as y,g as C,I as P,t as x,u as I,n as R,O as M,a6 as T,_ as $}from"./index.1e787b1d.js";import{h as g,i as z}from"./index.7c74626f.js";import{b as V}from"./request.531db72e.js";const j=["onContextmenu"],A={class:"content"},W={class:"float-fns"},q=["onClick"],H={class:"imgs"},O=B({__name:"index",props:{sId:null,sName:null,updateTime:null,isPublic:null,size:null,isCollection:{type:Boolean},showWay:{default:"horizontal"},hasSelect:{type:Boolean,default:!1},handleSelect:{type:Function,default:()=>{}}},emits:["onDownload","onShare","onPublic","onCollect","onMove","onRename","onDetails","onDelete","click"],setup(S,{emit:n}){const o=S,l=f({show:!1,x:0,y:0}),t=s=>function(...u){s(...u),l.show=!1},e=f({});b(()=>{for(let s in e)delete e[s];e.download={label:"\u4E0B\u8F7D",key:"download",props:{onclick:t(()=>{n("onDownload",o.sId)})}},e.share={label:"\u5206\u4EAB",key:"share",props:{onclick:t(()=>{n("onShare")})}},e.public={label:o.isPublic===1?"\u516C\u5F00\u8D44\u6E90":"\u79C1\u5BC6\u8D44\u6E90",key:"public",props:{onclick:t(()=>{n("onPublic")})}},e.collect={label:o.isCollection?"\u53D6\u6D88\u6536\u85CF":"\u6536\u85CF",key:"collect",props:{onclick:t(()=>{n("onCollect")})}},e.move={label:"\u79FB\u52A8",key:"move",props:{onclick:t(()=>{n("onMove")})}},e.reName={label:"\u91CD\u547D\u540D",key:"reName",props:{onclick:t(()=>{n("onRename")})}},e.details={label:"\u67E5\u770B\u8BE6\u7EC6\u4FE1\u606F",key:"details",props:{onclick:t(()=>{n("onDetails")})}},e.delete={label:"\u5220\u9664",key:"delete",props:{onclick:t(()=>{n("onDelete",o.sId)}),style:{color:"red"}}}});const i=f([]);b(()=>{i.splice(0,i.length),o.sId===0?i.push(e.download,e.reName,e.details):o.isPublic===0?i.push(e.download,e.share,e.collect,e.details):i.push(e.download,e.share,e.collect,e.public,e.move,e.reName,e.details,e.delete)});const h=v(null),m=v(!1);g("mouseenter",h,()=>{m.value=!0}),g("mouseleave",h,()=>{m.value=!1});const _=s=>{l.show=!1,T().then(()=>{l.show=!0,l.x=s.clientX,l.y=s.clientY})};return(s,u)=>{const D=E("n-dropdown");return k(),w(M,null,[a("div",{class:R(["resource-box",o.hasSelect?"has-select":""]),ref_key:"myRef",ref:h,onClick:u[1]||(u[1]=N=>s.$emit("click")),onContextmenu:y(_,["prevent"])},[a("div",A,[d(a("ul",W,[a("li",null,[c(z,{style:{width:"18px",height:"18px"},hasSelect:o.hasSelect,handleSelect:o.handleSelect},{icon:F(()=>[d(c(r,{className:"icon-dui"},null,512),[[p,o.hasSelect]])]),_:1},8,["hasSelect","handleSelect"])]),o.isPublic!==0&&!o.hasSelect?(k(),w("li",{key:0,onClick:u[0]||(u[0]=y(N=>s.$emit("onPublic"),["stop"]))},[d(c(r,{className:"icon-jiesuo"},null,512),[[p,o.isPublic===2]]),d(c(r,{className:"icon-suoding"},null,512),[[p,o.isPublic===1]])])):C("",!0),d(a("li",{onClick:y(_,["stop"])},[c(r,{className:"icon-gengduo2"})],8,q),[[p,!o.hasSelect]])],512),[[p,m.value||o.hasSelect]]),a("div",H,[c(r,{className:"icon-icon-test",class:"resource-icon"}),o.sId===0?(k(),P(r,{key:0,className:"icon-tongbushoucang",class:"collect"})):C("",!0)]),a("p",null,x(o.sName),1),a("p",null,x(I(V)(o.updateTime)),1)])],42,j),c(D,{placement:"bottom-start",trigger:"manual",style:{"text-align":"left"},x:l.x,y:l.y,options:i,show:l.show,"on-clickoutside":()=>{l.show=!1}},null,8,["x","y","options","show","on-clickoutside"])],64)}}});const G=$(O,[["__scopeId","data-v-44e09a0c"]]);export{G as R};
