import{d as D,a as f,a1 as w,r as v,b as k,o as C,c as N,e as i,i as _,v as y,j as d,q as B,Q as g,t as x,u as E,n as A,O as M,a6 as R,_ as $}from"./index.1e787b1d.js";import{b as T,M as z}from"./request.531db72e.js";import{h as F,i as j,k as b,p as P}from"./index.7c74626f.js";const H=["onContextmenu"],V={class:"content"},W={class:"float-fns"},X=["onClick"],Y={class:"imgs"},q=D({__name:"index",props:{foId:null,foName:null,updateTime:null,changeAble:{type:Boolean,default:!0},size:null,hasSelect:{type:Boolean,default:!1},handleSelect:{type:Function,default:()=>{}}},emits:["click","onDownload","onMove","onRename","onDetails","onDelete"],setup(r,{emit:a}){const l=r,o=f({show:!1,x:0,y:0}),t=c=>function(...h){c(...h),o.show=!1},e=f({});w(()=>{for(let c in e)delete e[c];e.download={label:"\u4E0B\u8F7D",key:"download",props:{onclick:t(()=>{a("onDownload")})}},e.move={label:"\u79FB\u52A8",key:"move",props:{onclick:t(()=>{a("onMove")})}},e.reName={label:"\u91CD\u547D\u540D",key:"reName",props:{onclick:t(()=>{a("onRename")})}},e.details={label:"\u67E5\u770B\u8BE6\u7EC6\u4FE1\u606F",key:"details",props:{onclick:t(()=>{a("onDetails")})}},e.delete={label:"\u5220\u9664",key:"delete",props:{onclick:t(()=>{a("onDelete")}),style:{color:"red"}}}});const s=f([]);w(()=>{s.splice(0,s.length),s.push(e.download),l.changeAble?s.push(e.move,e.reName,e.details,e.delete):s.push(e.details)});const n=v(null),u=v(!1);F("mouseenter",n,()=>{u.value=!0}),F("mouseleave",n,()=>{u.value=!1});const p=c=>{o.show=!1,R().then(()=>{o.show=!0,o.x=c.clientX,o.y=c.clientY})};return(c,h)=>{const m=k("svg-icon"),S=k("n-dropdown");return C(),N(M,null,[i("div",{class:A(["folder-box",l.hasSelect?"has-select":""]),ref_key:"myRef",ref:n,onContextmenu:g(p,["prevent"]),onClick:h[0]||(h[0]=L=>c.$emit("click"))},[i("div",V,[_(i("ul",W,[i("li",null,[d(j,{style:{width:"18px",height:"18px"},hasSelect:l.hasSelect,handleSelect:l.handleSelect},{icon:B(()=>[_(d(m,{className:"icon-dui"},null,512),[[y,l.hasSelect]])]),_:1},8,["hasSelect","handleSelect"])]),_(i("li",{onClick:g(p,["stop"])},[d(m,{className:"icon-gengduo2"})],8,X),[[y,!l.hasSelect]])],512),[[y,u.value||l.hasSelect]]),i("div",Y,[d(m,{className:"icon-wenjianjia",class:"folder-icon"})]),i("p",null,x(l.foName),1),i("p",null,x(E(T)(l.updateTime)),1)])],42,H),d(S,{placement:"bottom-start",trigger:"manual",style:{"text-align":"left"},x:o.x,y:o.y,options:s,show:o.show,"on-clickoutside":()=>{o.show=!1}},null,8,["x","y","options","show","on-clickoutside"])],64)}}});const oe=$(q,[["__scopeId","data-v-c7a24327"]]),I=["onContextmenu"],O={class:"content"},Q={class:"float-fns"},G=["onClick"],J={class:"imgs"},K=D({__name:"index",props:{fId:null,fileName:null,updateTime:null,size:null,type:null,changeAble:{type:Boolean,default:!0},hasSelect:{type:Boolean},handleSelect:{type:Function,default:()=>{}}},emits:["onDownload","onMove","onRename","onDetails","onDelete"],setup(r,{emit:a}){const l=r,o=f({show:!1,x:0,y:0}),t=c=>function(...h){c(...h),o.show=!1},e=f({});w(()=>{for(let c in e)delete e[c];e.download={label:"\u4E0B\u8F7D",key:"download",props:{onclick:t(()=>{a("onDownload")})}},e.move={label:"\u79FB\u52A8",key:"move",props:{onclick:t(()=>{a("onMove")})}},e.reName={label:"\u91CD\u547D\u540D",key:"reName",props:{onclick:t(()=>{a("onRename")})}},e.details={label:"\u67E5\u770B\u8BE6\u7EC6\u4FE1\u606F",key:"details",props:{onclick:t(()=>{a("onDetails")})}},e.delete={label:"\u5220\u9664",key:"delete",props:{onclick:t(()=>{a("onDelete")}),style:{color:"red"}}}});const s=f([]);w(()=>{s.splice(0,s.length),s.push(e.download),l.changeAble?s.push(e.move,e.reName,e.details,e.delete):s.push(e.details)});const n=v(null),u=v(!1);F("mouseenter",n,()=>{u.value=!0}),F("mouseleave",n,()=>{u.value=!1});const p=c=>{o.show=!1,R().then(()=>{o.show=!0,o.x=c.clientX,o.y=c.clientY})};return(c,h)=>{const m=k("svg-icon"),S=k("n-dropdown");return C(),N(M,null,[i("div",{class:A(["file-box",l.hasSelect?"has-select":""]),onContextmenu:g(p,["prevent"]),ref_key:"myRef",ref:n},[i("div",O,[_(i("ul",Q,[i("li",null,[d(j,{style:{width:"18px",height:"18px"},hasSelect:l.hasSelect,handleSelect:l.handleSelect},{icon:B(()=>[_(d(m,{className:"icon-dui"},null,512),[[y,l.hasSelect]])]),_:1},8,["hasSelect","handleSelect"])]),_(i("li",{onClick:g(p,["stop"])},[d(m,{className:"icon-gengduo2"})],8,G),[[y,!l.hasSelect]])],512),[[y,u.value||l.hasSelect]]),i("div",J,[d(m,{className:"icon-wendangicon",class:"file-icon"})]),i("p",null,x(l.fileName),1),i("p",null,x(E(T)(l.updateTime)),1)])],42,I),d(S,{placement:"bottom-start",trigger:"manual",x:o.x,y:o.y,options:s,show:o.show,"on-clickoutside":()=>{o.show=!1}},null,8,["x","y","options","show","on-clickoutside"])],64)}}});const le=$(K,[["__scopeId","data-v-750b710d"]]),se=r=>{const a={dires:{},files:[]};let l="";for(let o=0;o<r.length;o++){const t=r[o].webkitRelativePath.split("/");l=t[0];let e=a;for(let s=1;s<t.length-1;s++){let n=t[s];e.dires[n]||(e.dires[n]={dires:{},files:[]}),e=e.dires[n]}e.files.push(r[o])}return[l,a]},ne=async(r,a,l,o)=>{const t=async(e,s,n)=>{for(let u of e.files)await P(u,2,n),console.log("\u4E0A\u4F20\u6587\u4EF6",u.name);for(let u of Object.keys(e.dires))try{const p=await b(r,n,u);console.log("\u65B0\u5EFA\u6587\u4EF6\u5939",u),t(e.dires[u],s,p.data.data)}catch(p){console.log("createFolder error",p)}};return new Promise(async(e,s)=>{try{const n=await b(r,a,l);await t(o,r,n.data.data),z("success","\u4E0A\u4F20\u6210\u529F"),e("")}catch(n){console.log("createFullFolder error",n)}})};export{oe as F,le as a,se as b,ne as c};
