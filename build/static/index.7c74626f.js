import{T as pe,A as _e,U as fe,u as r,V as ye,d as R,o as d,c as p,e as l,Q as q,f as x,n as M,_ as b,l as O,b as B,j as _,q as F,I as E,g as w,t as $,a as se,r as h,i as S,v as L,O as A,P as U,m as ie,W as ge,X as he,Y as ke,s as Y,Z as $e,w as j,R as D,$ as re,p as P,h as K,a0 as W,a1 as Z,a2 as Ce,a3 as we,S as Q,a4 as ne}from"./index.1e787b1d.js";import{g as N,p as T,a as J,b as X,T as G,M as oe,c as Fe}from"./request.531db72e.js";const is=(e={})=>N({url:"/resource/list"}),rs=(e,t={})=>N({url:"/resource/content",params:{rId:e}}),Ee=(e,t={})=>N({url:"/resource/collection",params:{rId:e}}),ds=(e,t={})=>T({url:"/resource/lock",data:{rId:e}}),Re=(e,t={})=>N({url:"/resource",params:{id:e}}),vs=(e,t,s={})=>T({url:"/resource",data:{rId:e,name:t}}),ms=(e,t={})=>J({url:"/resource",params:{rId:e}}),be=(e,t={})=>N({url:"/resource/up",params:{rid:e}}),ps=(e,t,s={})=>T({url:"/resource/rename",data:{id:e,name:t}}),_s=(e,t={})=>N({url:"/resource/folder/content",params:{id:e}}),fs=(e,t,s,o={})=>T({url:"/resource/folder",data:{rId:e,folderId:t,name:s}}),ys=(e,t={})=>J({url:"/resource/folder",params:{id:e}}),Be=(e,t={})=>N({url:"/resource/folder",params:{id:e}}),gs=(e,t,s={})=>T({url:"/resource/folder/rename",data:{id:e,name:t}}),hs=(e,t,s={})=>T({url:"/resource/file/rename",data:{id:e,name:t}}),ks=(e,t={})=>J({url:"/resource/file",params:{id:e}}),Ne=(e,t={})=>N({url:"/resource/file",params:{id:e}}),$s=(e,t,s,o={})=>T({url:"/resource/file",data:{file:e,type:t,id:s}}),Ie=(e,t,s={})=>N({url:"/resource/search",params:{text:e,type:t}}),le=(e,t,s={})=>N({url:"/resource/route",params:{type:e,id:t}}),Se=(e,t={})=>N({url:"/resource/comment",params:{id:e}}),xe=(e,t={})=>N({url:"/resource/comment/sons",params:{id:e}}),ae=(e,t={})=>T({url:"/resource/comment/giveLike",data:{id:e}}),Le=pe("resources",{state(){return{recordArr:[["sId=null&foId=null",[{path:{name:_e},text:"\u6211\u7684\u8D44\u6E90"}]]]}},getters:{recordMap(){return new Map(this.recordArr)}},actions:{getRecordFromMap({sId:e=null,foId:t=null}={}){var o;let s=`sId=${e}&foId=${t}`;return(o=this.recordMap.get(s))!=null?o:[]},addRecordToMap({foId:e=null,sId:t=null}={},s){let o=`sId=${t}&foId=${e}`;this.recordMap.get(o)||this.recordArr.push([o,s])}},persist:{key:"resource-store",storage:sessionStorage}}),Me=Le,de=(e,t,s)=>{fe(()=>{r(t).addEventListener(e,s)}),ye(()=>{r(t).removeEventListener(e,s)})},Te=R({__name:"index",props:{hasSelect:{type:Boolean,default:!1},handleSelect:{type:Function,default:()=>{}}},setup(e){const t=e;return(s,o)=>(d(),p("div",{class:M(["container",e.hasSelect?"active":""])},[l("input",{type:"checkbox",onClick:o[0]||(o[0]=q((...c)=>t.handleSelect&&t.handleSelect(...c),["stop"]))}),x(s.$slots,"icon",{},void 0,!0)],2))}});const Ae=b(Te,[["__scopeId","data-v-95b2fe97"]]),De={key:0,class:"select-control"},Ue=R({__name:"index",props:{show:{type:Boolean},allCount:null,selectCount:{default:0},handleSelect:{type:Function,default:()=>{}}},setup(e){const t=e,s=O(()=>t.selectCount!==0),o=O(()=>t.allCount===t.selectCount),c=O(()=>t.selectCount?`\u5DF2\u9009${t.selectCount}\u9879`:`\u5171${t.allCount}\u9879`);return(n,v)=>{const m=B("svg-icon");return t.show?(d(),p("div",De,[_(Ae,{"has-select":r(s),handleSelect:t.handleSelect},{icon:F(()=>[r(s)&&!r(o)?(d(),E(m,{key:0,className:"icon-jianhao-"})):w("",!0),r(o)?(d(),E(m,{key:1,className:"icon-dui"})):w("",!0)]),_:1},8,["has-select","handleSelect"]),l("span",null,$(r(c)),1)])):w("",!0)}}});const Cs=b(Ue,[["__scopeId","data-v-04f082a6"]]),je=["onClick"],ze=R({__name:"index",props:{type:null,topest:{type:Boolean,default:!1},onNewResource:{type:Function,default:()=>{}},onNewFolder:{type:Function,default:()=>{}},onUploadFolder:{type:Function,default:()=>{}},onUploadFile:{type:Function,default:()=>{}}},emits:["onNewResource","onNewFolder","onUploadFolder","onUploadFile"],setup(e,{emit:t}){const s=e,o=se([]);s.topest===!0&&s.type==="resource"?o.push(1):s.topest===!1&&s.type==="resource"?o.push(1,2,3,4):s.type==="folder"&&o.push(2,3,4);const c=se([{id:1,text:"\u65B0\u5EFA\u8D44\u6E90",icon:"icon-icon-test",onclick:()=>{t("onNewResource")}},{id:2,text:"\u65B0\u5EFA\u6587\u4EF6\u5939",icon:"icon-24gl-folderOpen",onclick:()=>{t("onNewFolder")}},{id:3,text:"\u4E0A\u4F20\u6587\u4EF6\u5939",icon:"icon-wenjianjia",onclick:()=>{const m=document.createElement("input");m.type="file",m.formEnctype="multipart/form-data",m.webkitdirectory=!0,m.click(),m.onchange=f=>{t("onUploadFolder",f.target.files)}}},{id:4,text:"\u4E0A\u4F20\u6587\u4EF6",icon:"icon-wendangicon",onclick:()=>{const m=document.createElement("input");m.type="file",m.multiple=!0,m.formEnctype="multipart/form-data",m.click(),m.onchange=function(f){t("onUploadFile",f.target.files),console.log(f.target.files)}}}]),n=h(null),v=h(!1);return de("click",document,m=>{n.value.contains(m.target)||(v.value=!1)}),(m,f)=>{const k=B("svg-icon");return d(),p("div",{class:"container",onClick:f[0]||(f[0]=a=>v.value=!v.value),ref_key:"myRef",ref:n},[_(k,{className:"icon-jiahao",class:"add-icon"}),S(l("ul",null,[(d(!0),p(A,null,U(o,a=>(d(),p("li",{key:a,onClick:c[a-1].onclick},[_(k,{"class-name":c[a-1].icon,class:"icon"},null,8,["class-name"]),l("span",null,$(c[a-1].text),1)],8,je))),128))],512),[[L,v.value]])],512)}}});const ws=b(ze,[["__scopeId","data-v-38680b98"]]),Ve=R({__name:"index",props:{type:{default:"success"}},setup(e){const t=e,s={success:"#16a34a",error:"#dc2626"};return(o,c)=>(d(),p("div",{class:"btn",style:ie({background:s[t.type]})},[x(o.$slots,"default",{},void 0,!0)],4))}});const ue=b(Ve,[["__scopeId","data-v-540ae67b"]]),Oe={class:"modal"},qe={key:0},Ge={key:1},Pe={class:"btns"},Ke={inheritAttrs:!1},He=R({...Ke,__name:"index",props:{show:{type:Boolean},maskClose:{type:Boolean,default:!0},title:null,activeText:{default:"\u786E\u5B9A"},negativeText:{default:"\u53D6\u6D88"},hasNegative:{type:Boolean,default:!1},maskBackground:{default:"rgba(0, 0, 0, 0.35)"},hasHeader:{type:Boolean,default:!0},hasFooter:{type:Boolean,default:!0}},emits:["update:show","active-btn-click","negative-btn-click"],setup(e,{emit:t}){return(s,o)=>{const c=B("svg-icon");return e.show?(d(),E($e,{key:0,name:"toggle"},{default:F(()=>[(d(),E(ge,{to:"body"},[l("div",Oe,[l("div",{class:"mask",onClick:o[0]||(o[0]=()=>{e.maskClose&&t("update:show",!1)}),style:ie({backgroundColor:e.maskBackground})},null,4),l("section",he(ke(s.$attrs)),[e.hasHeader?(d(),p("header",qe,[x(s.$slots,"header",{},()=>[Y($(e.title),1)],!0),_(c,{className:"icon-guanbi",class:"close-class",onClick:o[1]||(o[1]=q(n=>s.$emit("update:show",!1),["stop"]))})])):w("",!0),l("main",null,[x(s.$slots,"body",{},void 0,!0)]),e.hasFooter?(d(),p("footer",Ge,[x(s.$slots,"footer",{},()=>[l("div",Pe,[_(ue,{class:"active-button",onClick:o[2]||(o[2]=n=>s.$emit("active-btn-click"))},{default:F(()=>[Y($(e.activeText),1)]),_:1}),e.hasNegative?(d(),E(ue,{key:0,class:"negative-button",onClick:o[3]||(o[3]=n=>s.$emit("negative-btn-click"))},{default:F(()=>[Y($(e.negativeText),1)]),_:1})):w("",!0)])],!0)])):w("",!0)],16)])]))]),_:3})):w("",!0)}}});const z=b(He,[["__scopeId","data-v-96c95a38"]]),Ye=["type","value"],Qe=R({__name:"index",props:{type:null,value:null,clear:{type:Boolean,default:!1},look:{type:Boolean,default:!1},vertifyFn:{type:Function,default:e=>!0}},emits:["update:value"],setup(e,{emit:t}){const s=e,o=h(null),c=h(null),n=h(!1),v=h(s.type);de("click",document,a=>{c.value.contains(a.target)||(n.value=!1)});const m=h(!0);j(s,()=>{m.value=s.vertifyFn(s.value)});const f=a=>{t("update:value",a.target.value)},k=()=>{t("update:value","")};return(a,u)=>{const i=B("svg-icon");return d(),p("div",{class:"input-item",ref_key:"containerRef",ref:c},[l("input",D({type:v.value||e.type},a.$attrs,{value:e.value,onInput:f,onFocus:u[0]||(u[0]=q(g=>n.value=!0,["stop"])),ref_key:"inputRef",ref:o}),null,16,Ye),x(a.$slots,"clear",{onClear:k},()=>[S(_(i,{className:"icon-guanbi",class:"icons",onClick:q(k,["stop"])},null,8,["onClick"]),[[L,a.$attrs.type==="text"&&e.clear&&e.value&&n.value]])],!0),x(a.$slots,"show-pass",{},()=>[S(_(i,{class:"icons",className:"icon-xianshi_huaban",onClick:u[1]||(u[1]=g=>v.value="text")},null,512),[[L,e.look&&e.type==="password"&&v.value==="password"&&e.value&&n.value]]),S(_(i,{class:"icons",className:"icon-yincang",onClick:u[2]||(u[2]=g=>v.value="password")},null,512),[[L,e.look&&e.type==="password"&&v.value!=="password"&&e.value&&n.value]])],!0),l("div",{class:M(["line",[n.value?"focus":"",m.value?"":"no-satisfy"]])},null,2)],512)}}});const ve=b(Qe,[["__scopeId","data-v-1ea6251e"]]),We={class:"modal-body"},Xe=R({__name:"index",props:{type:null},emits:["createResource","createFolder","update:show"],setup(e,{emit:t}){const s=e,o=h(s.type==="f"?"\u65B0\u5EFA\u6587\u4EF6\u5939":"\u65B0\u5EFA\u8D44\u6E90"),c=h("");j(s,()=>{c.value=s.type==="f"?"\u65B0\u5EFA\u6587\u4EF6\u5939":"\u65B0\u5EFA\u8D44\u6E90"},{immediate:!0});const n=()=>{s.type==="r"?t("createResource",c.value):t("createFolder",c.value)},v=()=>{t("update:show",!1)};return(m,f)=>{const k=B("svg-icon"),a=re("select");return d(),E(z,D({show:""},m.$attrs,{onActiveBtnClick:n,onNegativeBtnClick:v,"onUpdate:show":f[1]||(f[1]=u=>m.$emit("update:show",!1)),title:o.value}),{body:F(()=>[l("section",We,[_(k,{className:e.type==="r"?"icon-icon-test":"icon-wenjianjia",class:"resource-item"},null,8,["className"]),S(_(ve,{type:"text",value:c.value,"onUpdate:value":f[0]||(f[0]=u=>c.value=u)},null,8,["value"]),[[a]])])]),_:1},16,["title"])}}});const Fs=b(Xe,[["__scopeId","data-v-300bd2a9"]]),Ze=e=>(P("data-v-f2881252"),e=e(),K(),e),Je={class:"right-content"},et={class:"user-info"},tt={key:0,class:"tag-writer"},st={class:"content"},nt={class:"like-and-comment"},ot={class:"comment"},lt=Ze(()=>l("span",null,"\u56DE\u590D",-1)),at={inheritAttrs:!1},ut=R({...at,__name:"single-comment",props:{count:null,user:null,content:null,time:null,likes:null,isLike:{type:Boolean}},emits:["giveLike"],setup(e,{emit:t}){return(s,o)=>{const c=B("n-avatar"),n=B("svg-icon");return d(),p("section",D({class:"single-comment"},s.$attrs),[_(c,{round:"",size:48,src:e.user.avater},null,8,["src"]),l("div",Je,[l("div",et,[l("p",null,$(e.user.name),1),l("p",null,$(r(X)(e.time)),1),e.user.isOwn?(d(),p("p",tt,"\u4F5C\u8005")):w("",!0)]),l("div",st,[l("p",null,$(e.content),1)]),l("div",nt,[l("div",{class:"like",onClick:o[0]||(o[0]=v=>s.$emit("giveLike"))},[_(n,{className:"icon-dianzan1",class:M([e.isLike?"active":"","icon"])},null,8,["class"]),l("span",null,$(e.likes),1)]),l("div",ot,[_(n,{className:"icon-31pinglun",class:"icon"}),lt])]),x(s.$slots,"default",{},void 0,!0)])],16)}}});const ce=b(ut,[["__scopeId","data-v-f2881252"]]),ee=e=>(P("data-v-62c5654d"),e=e(),K(),e),ct={class:"comments-all"},it={class:"body-container"},rt={key:0},dt={class:"more"},vt=["onClick"],mt=ee(()=>l("p",null,"\u5C55\u5F00\u66F4\u591A",-1)),pt={class:"loading"},_t={class:"footer"},ft=ee(()=>l("input",{type:"text"},null,-1)),yt={class:"fns"},gt=ee(()=>l("button",null,"\u53D1\u9001",-1)),ht=R({__name:"index",props:{id:null},emits:["update:show"],setup(e,{emit:t}){const s=e,o=h(null),c=h(!1),n=h(0);(async()=>{c.value=!0,Se(s.id).then(a=>{o.value=a.data.data}).catch(a=>{console.log("getResourceComment error",a)}).finally(()=>{c.value=!1})})();const m=(a,u)=>{c.value=!0,n.value=u,xe(a).then(i=>{o.value.comments[u].sonComments.push(...i.data.data)}).catch(i=>{console.log("getSonCommentList error",i)}).finally(()=>{c.value=!1})},f=G((a,u)=>{ae(a).then(()=>{o.value.comments[u].isLike=!o.value.comments[u].isLike,o.value.comments[u].isLike?o.value.comments[u].likes++:o.value.comments[u].likes--}).catch(i=>{console.log("giveLikeToComment error",i)})},500),k=G((a,u,i)=>{ae(a).then(()=>{o.value.comments[u].sonComments[i].isLike=!o.value.comments[u].sonComments[i].isLike,o.value.comments[u].sonComments[i].isLike?o.value.comments[u].sonComments[i].likes++:o.value.comments[u].sonComments[i].likes--})},500);return h(""),(a,u)=>{const i=B("svg-icon"),g=B("n-spin");return d(),E(z,{show:o.value!==null,class:M(a.$style.modal),"onUpdate:show":u[0]||(u[0]=C=>a.$emit("update:show",!1))},{header:F(()=>[l("p",ct,"\u5168\u90E8\u8BC4\u8BBA"+$(o.value.commentCount),1)]),body:F(()=>[l("section",it,[(d(!0),p(A,null,U(o.value.comments,(C,y)=>(d(),E(ce,D({key:C.id},C,{onGiveLike:I=>r(f)(C.id,y)}),{default:F(()=>[C.sonComments.length?(d(),p("section",rt,[(d(!0),p(A,null,U(C.sonComments,(I,V)=>(d(),E(ce,D({key:I.id},I,{onGiveLike:me=>r(k)(I.id,y,V)}),null,16,["onGiveLike"]))),128))])):w("",!0),S(l("div",dt,[l("div",{class:"look-more",onClick:I=>m(C.id,y)},[mt,_(i,{className:"icon-gengduo2",class:"icon"})],8,vt)],512),[[L,C.count-C.sonComments.length&&!c.value]]),l("div",pt,[c.value&&y===n.value?(d(),E(g,{key:0,size:"small"})):w("",!0)])]),_:2},1040,["onGiveLike"]))),128))])]),footer:F(()=>[l("div",_t,[ft,l("div",yt,[_(i,{className:"icon-biaoqingbao",class:"icon"}),gt])])]),_:1},8,["show","class"])}}});const kt="_modal_gg61q_3",$t={modal:kt},Ct={$style:$t},wt=b(ht,[["__cssModules",Ct],["__scopeId","data-v-62c5654d"]]),Ft=(e,t)=>{const s=h(null),o=h(null),c=async()=>{if(s.value=null,o.value=null,r(t)==="r")try{const n=await Re(r(e));s.value=n.data.data}catch(n){o.value=n}else if(r(t)==="f")try{const n=await Be(r(e));s.value=n.data.data}catch(n){o.value=n}else if(r(t)==="file")try{const n=await Ne(r(e));s.value=n.data.data}catch(n){o.value=n}};return W(e)||W(t)?Z(c):c(),{data:s,error:o}},H=e=>(P("data-v-b023c40b"),e=e(),K(),e),Et={key:0,class:"icons-container"},Rt=H(()=>l("p",{class:"title"},"\u8BE6\u7EC6\u4FE1\u606F",-1)),bt={class:"name"},Bt={class:"descript"},Nt=H(()=>l("p",{class:"name"},"\u521B\u5EFA\u65F6\u95F4",-1)),It={class:"descript"},St=H(()=>l("p",{class:"name"},"\u4FEE\u6539\u65F6\u95F4",-1)),xt={class:"descript"},Lt=H(()=>l("span",null,null,-1)),Mt=R({__name:"index",props:{type:null,id:null,title:null},emits:["update:show"],setup(e,{emit:t}){const s=e,o=h(0),c=h(null);Z(()=>{o.value=s.id,c.value=s.type});const{data:n,error:v}=Ft(o,c),m=O(()=>s.type==="r"?"icon-icon-test":s.type==="f"?"icon-wenjianjia":"icon-wendangicon"),f=h("");j(n,()=>{n.value?s.type==="r"?f.value=`\u5305\u542B${n.value.sonResource.count}\u4E2A\u5B50\u8D44\u6E90(\u5927\u5C0F${n.value.sonResource.size}MB); \u5305\u542B${n.value.sonFolder.count}\u4E2A\u5B50\u6587\u4EF6\u5939(\u5927\u5C0F${n.value.sonFolder.size}MB); \u5305\u542B${n.value.sonFile.count}\u4E2A\u5B50\u6587\u4EF6(\u5927\u5C0F${n.value.sonFile.size}MB);`:s.type==="f"?f.value=`\u5305\u542B${n.value.sonFolder.count}\u4E2A\u5B50\u6587\u4EF6\u5939(\u5927\u5C0F${n.value.sonFolder.size}MB); \u5305\u542B${n.value.sonFile.count}\u4E2A\u5B50\u6587\u4EF6(\u5927\u5C0F${n.value.sonFile.size}MB);`:s.type==="file"&&(f.value=`${n.value.size}MB`):f.value=""});const k=G(async()=>{try{const i=await be(s.id);n.value.isLike=!n.value.isLike,i.data.msg==="\u70B9\u8D5E\u6210\u529F"?(n.value.isLike=!0,n.value.likes+=1):(n.value.isLike=!1,n.value.likes-=1),oe("success",i.data.msg)}catch(i){console.log("giveLikeToResource error",i)}},1e3),a=G(async()=>{try{const i=await Ee(s.id);i.data.msg==="\u6536\u85CF\u6210\u529F"?(n.value.isCollection=!0,n.value.collectionCount+=1):(n.value.isCollection=!1,n.value.collectionCount-=1),oe("success",i.data.msg)}catch(i){console.log("resourceCollect error",i)}},1e3),u=h(!1);return(i,g)=>{const C=B("svg-icon");return d(),p(A,null,[_(z,{show:r(n)!==null,title:e.title,"onUpdate:show":g[1]||(g[1]=y=>i.$emit("update:show",!1)),style:{"max-width":"340px"}},{body:F(()=>{var y,I,V;return[l("section",null,[l("header",null,[_(C,{className:r(m)},null,8,["className"])]),e.type==="r"&&r(n)?(d(),p("main",Et,[l("ul",null,[l("li",null,[_(C,{className:"icon-dianzan1",class:M(["icon",r(n).isLike?"like":""]),onClick:r(k)},null,8,["class","onClick"]),l("p",null,$((y=r(n))==null?void 0:y.likes),1)]),l("li",null,[_(C,{className:"icon-31pinglun",class:"icon",onClick:g[0]||(g[0]=me=>u.value=!0)}),l("p",null,$((I=r(n))==null?void 0:I.commentCount),1)]),l("li",null,[_(C,{className:"icon-shoucang1",class:M(["icon",r(n).isCollection?"collect":""]),onClick:r(a)},null,8,["class","onClick"]),l("p",null,$((V=r(n))==null?void 0:V.collectionCount),1)])])])):w("",!0),S(l("footer",null,[Rt,l("ul",null,[l("li",null,[l("p",bt,$(e.title),1),l("p",Bt,$(f.value),1)]),l("li",null,[Nt,l("p",It,$(r(n)?r(X)(r(n).createTime):""),1)]),l("li",null,[St,l("p",xt,$(r(n)?r(X)(r(n).updateTime):""),1)])])],512),[[L,r(n)]])])]}),footer:F(()=>[Lt]),_:1},8,["show","title"]),u.value?(d(),E(wt,{key:0,id:e.id,"onUpdate:show":g[2]||(g[2]=y=>u.value=!1)},null,8,["id"])):w("",!0)],64)}}});const Es=b(Mt,[["__scopeId","data-v-b023c40b"]]),Tt={class:"modal-body"},At=R({__name:"index",props:{type:null,initName:null},emits:["resourceRename","folderRename","fileRename","update:show"],setup(e,{emit:t}){const s=e,o=h("");j(s,()=>{o.value=s.initName},{immediate:!0});const c=()=>{s.type==="r"?t("resourceRename",o.value):s.type==="f"?t("folderRename",o.value):t("fileRename",o.value)};return(n,v)=>{const m=B("svg-icon"),f=re("select");return d(),E(z,D({show:"",title:"\u91CD\u547D\u540D"},n.$attrs,{onActiveBtnClick:c,onNegativeBtnClick:v[1]||(v[1]=k=>n.$emit("update:show",!1)),"onUpdate:show":v[2]||(v[2]=k=>n.$emit("update:show",!1))}),{body:F(()=>[l("section",Tt,[_(m,{className:e.type==="r"?"icon-icon-test":e.type==="f"?"icon-wenjianjia":"icon-wendangicon",class:"resource-item"},null,8,["className"]),S(_(ve,{type:"text",value:o.value,"onUpdate:value":v[0]||(v[0]=k=>o.value=k)},null,8,["value"]),[[f]])])]),_:1},16)}}});const Rs=b(At,[["__scopeId","data-v-8a7e078b"]]),Dt={class:"input-container"},Ut={key:0,class:"tag-outer-box"},jt={key:0},zt={key:1},Vt={key:2},Ot=["value","onKeyup"],qt={inheritAttrs:!1},Gt=R({...qt,__name:"Input",props:{value:null,tag:null},emits:["update:value","clearValue","clearTag"],setup(e,{emit:t}){const s=e,o=h("input"),c=v=>{t("update:value",v.target.value)},n=v=>{s.value||t("clearTag")};return(v,m)=>(d(),p("div",Dt,[x(v.$slots,"tag",{},()=>[e.tag?(d(),p("div",Ut,[e.tag==="r"?(d(),p("span",jt,"\u8D44\u6E90")):w("",!0),e.tag==="f"?(d(),p("span",zt,"\u6587\u4EF6\u5939")):w("",!0),e.tag==="file"?(d(),p("span",Vt,"\u6587\u4EF6")):w("",!0)])):w("",!0)],!0),l("input",D({type:"text",value:e.value,ref_key:"inputRef",ref:o},v.$attrs,{onInput:c,onKeyup:Ce(n,["delete"])}),null,16,Ot),S(l("span",{class:"clear",onClick:m[0]||(m[0]=f=>v.$emit("clearValue"))},"\u6E05\u9664",512),[[L,e.value]])]))}});const Pt=b(Gt,[["__scopeId","data-v-96b49b55"]]),Kt=(e,t)=>{const s=h(r(t));j(t,Fe(()=>{s.value=r(t)},400),{immediate:!0});const o=h(null),c=()=>{r(s)?Ie(r(s),r(e)).then(n=>{console.log("res",n),o.value=n.data.data}).catch(()=>{o.value=null}):o.value=null};return W(t)?Z(c):c(),{result:o}},te=e=>(P("data-v-21223ffb"),e=e(),K(),e),Ht={class:"section-lists"},Yt=te(()=>l("span",null,"\u8D44\u6E90",-1)),Qt=te(()=>l("span",null,"\u6587\u4EF6\u5939",-1)),Wt=te(()=>l("span",null,"\u6587\u4EF6",-1)),Xt={key:0},Zt=["onClick"],Jt={key:1},es=["onClick"],ts={key:2},ss=R({__name:"index",emits:["update:show"],setup(e,{emit:t}){const s=Me(),o=we(),c=h(""),n=h(""),{result:v}=Kt(c,n),m=async k=>{try{const a=await(await le("r",k)).data.data;let u=[];for(let i=0;i<a.length;i++){const g=s.getRecordFromMap({sId:a[i].sId});g.length?u=g:(u=[...u,{text:a[i].text,path:{name:Q,params:{sId:a[i].sId}}}],s.addRecordToMap({sId:a[i].sId},u))}o.push({name:Q,params:{sId:k}})}catch{}},f=async(k,a)=>{try{const u=await(await le("f",a)).data.data;let i=[];for(let g=0;g<u.length;g++){const C=u[g].text;Reflect.deleteProperty(u[g],"text");const y=s.getRecordFromMap(u[g]);y.length?i=y:(i=[...i,{text:C,path:{name:u[g].foId?ne:Q,params:u[g]}}],s.addRecordToMap(u[g],i))}o.push({name:ne,params:{sId:k,foId:a}})}catch(u){console.log("gotoF error",u)}};return(k,a)=>{const u=B("svg-icon");return d(),E(z,{show:"","mask-background":"transparent","has-footer":!1,"onUpdate:show":a[6]||(a[6]=i=>k.$emit("update:show",!1)),class:M(k.$style.modal)},{header:F(()=>[_(Pt,{value:n.value,tag:c.value,placeholder:"\u8BF7\u8F93\u5165",class:M(k.$style.input),"onUpdate:value":a[0]||(a[0]=i=>{n.value=i}),onClearValue:a[1]||(a[1]=()=>{n.value="",c.value=""}),onClearTag:a[2]||(a[2]=i=>c.value="")},null,8,["value","tag","class"])]),body:F(()=>{var i,g,C;return[l("section",Ht,[S(l("ul",null,[l("li",{onClick:a[3]||(a[3]=y=>c.value="r")},[_(u,{className:"icon-icon-test",class:"icon"}),Yt]),l("li",{onClick:a[4]||(a[4]=y=>c.value="f")},[_(u,{className:"icon-wenjianjia",class:"icon"}),Qt]),l("li",{onClick:a[5]||(a[5]=y=>c.value="file")},[_(u,{className:"icon-wendangicon",class:"icon"}),Wt])],512),[[L,!c.value&&!r(v)]]),(i=r(v))!=null&&i.resources?(d(),p("ul",Xt,[(d(!0),p(A,null,U(r(v).resources,y=>(d(),p("li",{key:y.sId,onClick:I=>m(y.sId)},[_(u,{className:"icon-icon-test",class:"icon"}),l("span",null,$(y.text),1)],8,Zt))),128))])):w("",!0),(g=r(v))!=null&&g.folders?(d(),p("ul",Jt,[(d(!0),p(A,null,U(r(v).folders,y=>(d(),p("li",{key:y.foId,onClick:I=>f(y.sId,y.foId)},[_(u,{className:"icon-wenjianjia",class:"icon"}),l("span",null,$(y.text),1)],8,es))),128))])):w("",!0),(C=r(v))!=null&&C.files?(d(),p("ul",ts,[(d(!0),p(A,null,U(r(v).files,y=>(d(),p("li",{key:y.fId},[_(u,{className:"icon-wendangicon",class:"icon"}),l("span",null,$(y.text),1)]))),128))])):w("",!0)])]}),_:1},8,["class"])}}});const ns="_modal_9xqm8_3",os="_input_9xqm8_17",ls={modal:ns,input:os},as={$style:ls},bs=b(ss,[["__cssModules",as],["__scopeId","data-v-21223ffb"]]);export{ws as C,Rs as R,Cs as S,Es as V,Fs as a,bs as b,vs as c,ds as d,Ee as e,ms as f,is as g,de as h,Ae as i,rs as j,fs as k,gs as l,hs as m,ys as n,ks as o,$s as p,_s as q,ps as r,Me as u};
